<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
   <h:head><title>IGNORED</title>
   </h:head>
   <h:body>
   	  
      <ui:composition template="../templates/sites_layout.xhtml">
         <ui:define name="content">
         <h:form id="reservationsForm" style=" min-height: 635px;">
         	
         	<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  				<div class="modal-dialog modal-sm">
    				<div class="modal-content">
      					<div class="modal-header">
        					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        					<h5 class="modal-title">#{msgs['reservations.cancel_confirm_header']}</h5>
      					</div>
      					<div class="modal-body">
      							<h:outputText id="canceled" value="#{reservationsBBean.selectedReservation.name} #{reservationsBBean.selectedReservation.date} #{reservationsBBean.selectedReservation.fromTime}-#{reservationsBBean.selectedReservation.toTime}"/>
      							<p>#{msgs['reservations.cancel_confirm_msg']}</p>
      					</div>
      					<div class="modal-footer">
        					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        					<button type="button" class="btn btn-primary">Save changes</button>
      					</div>
    				</div>
  				</div>
			</div>
         	
         
         	<p:messages id="messages" showSummary="true" showDetail="true"/>
         	<div class="row">        	
         		
				<div class="col-md-offset-1  col-md-5" >
        			<div class="mar-top20">
        				<div class="row">
        					<div class="col-md-12" >
			  					<button type="button" class="btn btn-sm btn-info" 
			  						data-toggle="popover" 
			  						data-trigger="focus"
			  						title="Pre-reservas" 
			  						data-placement="bottom"
			  						data-content="Las reservas de esta lista premanecerán bloqueadas para usted durante 15 minutos. Confírmelas para que sean definitivas.">
			  						<span class="fa fa-shopping-cart" aria-hidden="true"></span>Pre-reservas
			  					</button>
			  					<script>
			  						$("[data-toggle=popover]").popover();
			  					</script>
								<h:dataTable class="table table-condensed table-hover" id="activeReservationsTable" var="reservation"
									value="#{reservationsBBean.activeReservations}">
									
									<h:column>
										<h:outputText title="#{reservation.type}" value="#{reservation.name}" />				
									</h:column>
									<h:column>
										#{reservation.date}
									</h:column>
									<h:column> 
										#{reservation.fromTime}
									</h:column>
									<h:column>
										#{reservation.toTime}
									</h:column>
									<h:column>
										<h:commandLink  title="#{msgs['reservations.cancel']}"
											update="myModal"
											id="cancelActive" actionListener="#{reservationsBBean.setSelectedReservationAjax}">
											
											
											<f:attribute name="reservation" value="#{reservation}" />
											
											<f:passThroughAttribute name="data-toggle" value="modal" />
                                    		<f:passThroughAttribute name="data-target" value="#myModal" />
											<span class="fa-stack fa-1x">
											<i class="fa fa-circle fa-stack-2x"></i>
											<i class="fa fa-close fa-stack-1x fa-inverse"></i>
											</span>
											
										</h:commandLink>
										<h:commandLink onclick="$('#myModal').modal('show'); return false;" value="Launch Modal">
											<f:setPropertyActionListener target="#{reservationsBBean.selectedReservation}" value="#{reservation}" />
										</h:commandLink> 
										
										
										
										
										
									</h:column>
								</h:dataTable>
								
							</div>
						</div>
						<div class="row">
        					<div class="col-md-12" >
								<div class="text-center">
									<p:commandButton
										style="margin-top:6px;margin-bottom:6px"
										icon="ui-icon-circle-check"
										value="#{msgs['reservations.confirm']}">
									</p:commandButton>	
								</div>
							</div>
						</div>
						<div class="row">
        					<div class="col-md-12" >
        						<div class="mar-top100">
        							<h5>Reservas confirmadas</h5>
        						</div>
        						<h:dataTable class="table table-condensed table-hover" id="confirmedReservationsTable" var="reservation"
									value="#{myreservationsBBean.confirmedReservations}">
									
									<h:column>
										<h:outputText title="#{msgs['reservations.rsrc_type']}" value="#{reservation.name}" />				
									</h:column>
									<h:column>
										#{reservation.date}
									</h:column>
									<h:column> 
										#{reservation.fromTime}
									</h:column>
									<h:column>
										#{reservation.toTime}
									</h:column>
									<h:column>
										<h:commandLink  title="#{msgs['reservations.cancel']}">
											<span class="fa-stack fa-1x">
											<i class="fa fa-circle fa-stack-2x"></i>
											<i class="fa fa-close fa-stack-1x fa-inverse"></i>
											</span>
										</h:commandLink>
										
										
									</h:column>
								</h:dataTable>
        					</div>
        				</div>
        				
					</div>
        				
				</div>
				<div class="col-md-offset-1  col-md-4" >
					<ui:repeat  value="#{myReservationsBBean.resourceItemGroups}" var="rsrcItemGroup">
						<div class="mar-top10">
							<p>#{rsrcItemGroup.description}</p>
						</div>
						<ui:repeat value="#{rsrcItemGroup.resourceItems}" var="rsrcItem">
							
							<a class="btn btn-link btn-xs mar-top5" data-toggle="collapse" href="#collapse-#{rsrcItem.id}" aria-expanded="false" aria-controls="collapseExample">
  									#{rsrcItem.name}
  									<span class="caret"></span>
							</a>
							
							
							
							
						</ui:repeat>
						<ui:repeat value="#{rsrcItemGroup.resourceItems}" var="rsrcItem">
							
							
							
							<div class="collapse mar-top5" id="collapse-#{rsrcItem.id}">
  								<div class="well well-sm">
    								<p><strong>#{rsrcItem.name}</strong></p>
    								<p>Disponibilidad: #{rsrcItem.availableFromTime} - #{rsrcItem.availableToTime}<br/>
    								Antelación: #{rsrcItem.beforehand} #{rsrcItem.beforehandTU}<br/>
    								Unidad de reserva: #{rsrcItem.mintime} #{rsrcItem.timeunit}<br/>
    								Tiempo mínimo de reserva: #{rsrcItem.mintime} #{rsrcItem.timeunit}<br/> 
    								Tiempo máximo de reserva: #{rsrcItem.maxtime} #{rsrcItem.timeunit}<br/></p>
    								<p><em>#{rsrcItem.description}</em></p>
  								</div>
							</div>
							
							
							
						</ui:repeat>
					</ui:repeat>
				</div> 	  
			</div>
		
        </h:form>
        </ui:define>
      </ui:composition>
   </h:body>
</html>